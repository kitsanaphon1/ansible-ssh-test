- hosts: localhost
  connection: local
  vars:
    ansible_python_interpreter: /home/boho/ansible-env/bin/python3
  tasks:
    - name: ğŸ” à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œ ip.txt à¹€à¸”à¸´à¸¡ (à¸–à¹‰à¸²à¸¡à¸µ)
      file:
        path: ~/ip.txt
        state: absent

    - name: ğŸ“¥ à¸”à¸¶à¸‡ Public IP à¸‚à¸­à¸‡ VM
      azure.azcollection.azure_rm_publicipaddress_info:
        resource_group: "{{ resource_group }}"
        name: "{{ pip_name }}"
      register: ip_info

    - name: ğŸ” à¹à¸ªà¸”à¸‡à¸„à¹ˆà¸² IP à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸ˆà¸²à¸ Azure
      debug:
        msg: "IP Address: {{ ip_info.azure_publicipaddresses[0].ip_address | default('N/A') }}"

    - name: ğŸ“ à¹€à¸‚à¸µà¸¢à¸™ Public IP à¸¥à¸‡à¹„à¸Ÿà¸¥à¹Œ
      copy:
        content: "{{ ip_info.azure_publicipaddresses[0].ip_address | default('') }}"
        dest: ~/ip.txt
