- name: 🐳 ติดตั้ง Docker และ Docker Compose
  hosts: all
  become: yes

  tasks:
    - name: 🧼 ล้าง apt cache และอัปเดตแพ็คเกจ
      apt:
        update_cache: yes
        force_apt_get: yes

    - name: 📦 ติดตั้ง Docker
      apt:
        name: [docker.io]
        state: present

    - name: 📦 ติดตั้ง Docker Compose
      get_url:
        url: https://github.com/docker/compose/releases/download/v2.24.6/docker-compose-linux-x86_64
        dest: /usr/local/bin/docker-compose
        mode: '0755'

    - name: 🧪 ตรวจสอบเวอร์ชัน Docker
      shell: docker --version
      register: docker_ver
      changed_when: false

    - name: 📢 แสดงเวอร์ชัน Docker
      debug:
        msg: "{{ docker_ver.stdout }}"
